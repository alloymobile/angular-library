<div class="demo-root">
  <div class="demo-header d-flex align-items-center justify-content-between mb-3">
    <div>
      <h5 class="mb-1">TD Link Bar Demo</h5>
      <div class="text-muted small">Hydration via model (type first, then shape)</div>
    </div>

    <div class="d-flex gap-2">
      <button type="button" class="btn btn-sm btn-outline-secondary" (click)="resetJson()">Reset JSON</button>
      <button type="button" class="btn btn-sm btn-outline-secondary" (click)="clearOutput()">Clear Output</button>
    </div>
  </div>

  <!-- Tabs -->
  <div class="btn-group mb-3" role="group" aria-label="Link bar tabs">
    <button
      type="button"
      class="btn btn-outline-primary"
      [class.active]="activeTab === 'TdLink'"
      (click)="setActiveTab('TdLink')"
    >
      {{ getTabLabel('TdLink') }}
    </button>
    <button
      type="button"
      class="btn btn-outline-primary"
      [class.active]="activeTab === 'TdLinkIcon'"
      (click)="setActiveTab('TdLinkIcon')"
    >
      {{ getTabLabel('TdLinkIcon') }}
    </button>
    <button
      type="button"
      class="btn btn-outline-primary"
      [class.active]="activeTab === 'TdLinkLogo'"
      (click)="setActiveTab('TdLinkLogo')"
    >
      {{ getTabLabel('TdLinkLogo') }}
    </button>
  </div>

  <div class="row g-3">
    <!-- Left: JSON editor -->
    <div class="col-12 col-lg-6">
      <div class="card">
        <div class="card-header d-flex align-items-center justify-content-between">
          <div class="fw-semibold">JSON</div>
          @if (currentTab.parseError) {
            <span class="badge text-bg-danger">Parse error</span>
          }
        </div>

        <div class="card-body">
          <textarea
            class="form-control font-monospace"
            rows="18"
            [ngModel]="currentTab.json"
            (ngModelChange)="onJsonChange($event)"
          ></textarea>

          @if (currentTab.parseError) {
            <div class="alert alert-danger mt-3 mb-0">
              {{ currentTab.parseError }}
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Right: Preview + Output -->
    <div class="col-12 col-lg-6">
      <div class="card mb-3">
        <div class="card-header fw-semibold">Preview</div>
        <div class="card-body">
          <td-link-bar
            [linkBar]="linkBarModel"
            (output)="handleOutput($event)"
          ></td-link-bar>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-header fw-semibold">Usage</div>
        <div class="card-body">
          <!-- IMPORTANT: ICU-safe. Do NOT use {{ tagSnippet }} -->
          <pre class="mb-0"><code [textContent]="tagSnippet"></code></pre>
        </div>
      </div>

      <div class="card">
        <div class="card-header fw-semibold">Output</div>
        <div class="card-body">
          <pre class="mb-0"><code [textContent]="currentTab.output"></code></pre>
        </div>
      </div>
    </div>
  </div>
</div>
