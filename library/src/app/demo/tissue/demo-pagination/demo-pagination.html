<div class="container py-3">
  <h3 class="mb-3 text-center">TDPagination</h3>

  <!-- Usage snippet -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>{{ tagSnippet }}</code>
      </pre>
    </div>
  </div>

  <!-- Live preview -->
  <div class="row mb-4">
    <div class="col-12">
      <td-pagination
        [pagination]="model"
        (output)="handleOutput($event)"
      ></td-pagination>

      <div class="small text-secondary mt-2 text-center">
        <strong>TDPagination</strong> renders
        <code>First</code>, <code>Previous</code>, a window of page
        numbers with ellipses, then <code>Next</code> and
        <code>Last</code>.
        <br />
        Every click emits an <code>OutputObject</code> with
        <code>type="pagination"</code>, <code>action="Page"</code>, and
        <code>data</code> containing the target <code>pageNumber</code> (0-based).
      </div>
    </div>
  </div>

  <!-- JSON in / JSON out -->
  <div class="row g-3 align-items-stretch">
    <!-- Left: Input JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Pagination Input JSON (editable)</span>
        <div class="d-flex gap-2">
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary"
            (click)="resetJson()"
          >
            Reset
          </button>
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary"
            (click)="formatJson()"
            title="Format JSON"
          >
            <i class="fa-solid fa-wand-magic-sparkles me-1" aria-hidden="true"></i>
            Format
          </button>
        </div>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError"
        rows="22"
        [ngModel]="paginationJson"
        (ngModelChange)="onJsonChange($event)"
        spellcheck="false"
      ></textarea>

      <div *ngIf="parseError" class="invalid-feedback d-block mt-1">
        {{ parseError }}
      </div>

      <div class="form-text">
        Required server fields:
        <ul class="mb-0 ps-3">
          <li>
            <code>totalPages</code>, <code>totalElements</code>,
            <code>numberOfElements</code>, <code>size</code>,
            <code>number</code> (current page, 0-based),
            <code>first</code>, <code>last</code>, <code>empty</code>.
          </li>
          <li>
            Optional styling: <code>name</code>,
            <code>className</code>, <code>listClassName</code>,
            <code>itemClassName</code>,
            <code>activeClassName</code>,
            <code>disabledClassName</code>.
          </li>
        </ul>
      </div>
    </div>

    <!-- Right: Output JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">
          Output (from <code>output</code> callback)
        </span>
        <button
          type="button"
          class="btn btn-sm btn-outline-danger"
          (click)="clearOutput()"
        >
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="22"
        [ngModel]="outputJson"
        spellcheck="false"
        readonly
      ></textarea>

      <div class="form-text">
        Example output (click <code>Next</code> from page 1 of 10):
        <pre class="mb-0 mt-1 small bg-light p-2 rounded">{{ '{' }}
  "id": "vendorPagination",
  "type": "pagination",
  "action": "Page",
  "error": false,
  "data": {{ '{' }}
    "pageNumber": 1
  {{ '}' }}
{{ '}' }}</pre>
        You can call your API with <code>data.pageNumber</code> and
        <code>data.size</code> to fetch the correct page.
      </div>
    </div>
  </div>
</div>
