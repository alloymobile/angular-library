<div class="container-fluid py-3">
  <h3 class="mb-3 text-center">TdTableAction â€“ Grouped Headers Mode</h3>

  <!-- Row 1 â€” Tag sample -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>{{ tagSnippet }}</code>
      </pre>
    </div>
  </div>

  <!-- Row 2 â€” Live table -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="table-wrapper">
        <td-table-action
          [tableAction]="model"
          (output)="handleOutput($event)"
        ></td-table-action>
      </div>

      <div class="small text-secondary mt-2">
        <strong>Features:</strong> Grouped headers, row selection, icon-text cells, 
        editable inputs (New, Discretion), status badges, and action buttons.
        <br>
        <strong>Backward Compatible:</strong> Without <code>columns</code> config, the component uses legacy flat mode.
      </div>
    </div>
  </div>

  <!-- Row 3 â€” Feature Info -->
  <div class="row mb-3">
    <div class="col-12">
      <div class="alert alert-info small mb-0">
        <div class="row">
          <div class="col-md-6">
            <strong>Cell Types:</strong>
            <ul class="mb-md-0 mt-1">
              <li><code>text</code> â€” Plain text display</li>
              <li><code>icon-text</code> â€” Icon + value (e.g., ðŸ”’ 2.50)</li>
              <li><code>input</code> â€” Editable input field</li>
              <li><code>status</code> â€” Colored badge (Active, Expiring)</li>
            </ul>
          </div>
          <div class="col-md-6">
            <strong>Output Events:</strong>
            <ul class="mb-0 mt-1">
              <li><code>selection</code> â€” Row/all selection changes</li>
              <li><code>column</code> â€” Sort header clicks</li>
              <li><code>input</code> â€” Input field changes</li>
              <li><code>table</code> â€” Action button clicks (includes row + inputs)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Row 4 â€” Input JSON (editable) and Output panel -->
  <div class="row g-3 align-items-stretch">
    <!-- Left: Input JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Input JSON (editable)</span>
        <button
          type="button"
          class="btn btn-sm btn-outline-secondary"
          (click)="resetJson()"
        >
          Reset
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError"
        rows="24"
        [ngModel]="inputJson"
        (ngModelChange)="onJsonChange($event)"
        spellcheck="false"
      ></textarea>

      <div *ngIf="parseError" class="invalid-feedback d-block mt-1">
        {{ parseError }}
      </div>

      <div class="form-text mt-2">
        <strong>New Properties:</strong>
        <ul class="mb-0 mt-1">
          <li>
            <code>columns</code> â€” Explicit column config with <code>type: 'simple' | 'grouped'</code>
          </li>
          <li>
            <code>cellType</code> â€” Cell renderer: <code>text | icon-text | input | status</code>
          </li>
          <li>
            <code>showCheckboxColumn</code> â€” Enable row selection checkboxes
          </li>
          <li>
            <code>showIconColumn</code> â€” Show/hide the icon column (default: true)
          </li>
        </ul>
      </div>
    </div>

    <!-- Right: Output JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">
          Output (from <code>output</code> callback)
        </span>
        <button
          type="button"
          class="btn btn-sm btn-outline-danger"
          (click)="clearOutput()"
        >
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="24"
        [ngModel]="outputJson"
        spellcheck="false"
        readonly
      ></textarea>

      <div class="form-text mt-2">
        <strong>Action Button Output:</strong>
        <br>
        When clicking an action button, the output includes:
        <ul class="mb-0 mt-1">
          <li><code>rowId</code> â€” The row's identifier</li>
          <li><code>row</code> â€” Full row data with current input values</li>
          <li><code>inputs</code> â€” Map of all input field values for the row</li>
          <li><code>buttonData</code> â€” Which button was clicked</li>
        </ul>
      </div>
    </div>
  </div>
</div>