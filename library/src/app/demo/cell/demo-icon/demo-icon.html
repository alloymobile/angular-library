<!-- demo-icon.html -->
<section id="icon" class="container py-3">
  <h3 class="mb-1 text-center">TdIcon</h3>

  <!-- Row 1 — Code sample (centered) -->
  <div class="row mb-2">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>&lt;td-icon [model]="iconModel"&gt;&lt;/td-icon&gt;</code>
      </pre>
    </div>
  </div>

  <!-- Row 2 — Rendered icon (centered) -->
  <div class="row mb-3">
    <div class="col-12 text-center">
      <span class="fw-semibold d-block mb-2">Icon</span>
      <div class="d-flex justify-content-center">
        <td-icon [icon]="displayModel()"></td-icon>
      </div>

      <div class="form-text mt-2">
        Wrapper styling comes from <code>className</code> on the icon object.
      </div>
    </div>
  </div>

  <!-- Row 3 — Editable JSON (full width) -->
  <div class="row mb-2">
    <div class="col-12">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <span class="fw-semibold">Icon JSON (editable)</span>
        <button
          type="button"
          (click)="formatJson()"
          class="btn btn-sm btn-outline-secondary">
          <i class="fa-solid fa-wand-magic-sparkles me-2" aria-hidden="true"></i>
          Format JSON
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="jsonError()"
        rows="7"
        spellcheck="false"
        [(ngModel)]="jsonText"
        (ngModelChange)="handleJsonChange($event)">
      </textarea>

      @if (jsonError()) {
        <div class="invalid-feedback">{{ jsonError() }}</div>
      } @else {
        <div class="form-text">
          Required: <code>iconClass</code>. Optional: <code>id</code>, <code>className</code>.
        </div>
      }
    </div>
  </div>

  <!-- Search -->
  <div class="mb-3">
    <label for="iconSearch" class="form-label fw-semibold">
      Search Icons
    </label>
    <input
      id="iconSearch"
      type="search"
      class="form-control"
      placeholder="Type name (e.g., 'user', 'gear', 'arrow')"
      [(ngModel)]="query"
    />
  </div>

  <!-- Gallery — 12 icons per row, icon-only, click to select -->
  <div class="row g-2">
    @for (icon of filteredIcons(); track icon.cls) {
      <div class="col-1">
        <button
          type="button"
          class="btn w-100 d-flex align-items-center justify-content-center py-3"
          [class.btn-primary]="icon.cls === selectedIconClass()"
          [class.btn-outline-secondary]="icon.cls !== selectedIconClass()"
          [title]="icon.name"
          (click)="selectIcon(icon)">
          <i [class]="icon.cls + ' fa-lg'" aria-hidden="true"></i>
        </button>
      </div>
    }

    @if (filteredIcons().length === 0) {
      <div class="col-12">
        <div class="alert alert-warning mb-0">
          No icons match "{{ query }}".
        </div>
      </div>
    }
  </div>
</section>
