<!-- src/app/demo/shell/demo-button/demo-button.html -->
<div class="container py-3">
  <h3 class="mb-3 text-center">TdButton</h3>

  <!-- Row 1 — Usage snippet -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>&lt;td-button [button]="buttonObj" (output)="handleOutput($event)"&gt;&lt;/td-button&gt;</code>
      </pre>
    </div>
  </div>

  <!-- Row 2 — Live Button Preview -->
  <div class="row mb-4">
    <div class="col-12 text-center">
      <td-button [button]="model()" (output)="handleOutput($event)"></td-button>

      <div class="d-flex justify-content-center gap-2 mt-3">
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="toggleActive()">
          Toggle isActive
        </button>
      </div>

      <div class="small text-secondary mt-2">
        Tip: Click emits via <code>output</code> as an <code>OutputObject</code>.
        Use <code>isActive</code> + <code>active</code> in JSON to control selected styling (parent-driven).
      </div>
    </div>
  </div>

  <!-- Row 3 — JSON in / JSON out -->
  <div class="row g-3 align-items-stretch">
    <!-- Left side: Input editor -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Input JSON (editable)</span>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="handleReset()">
            Reset
          </button>
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary"
            (click)="handleFormat()"
            title="Format JSON">
            <i class="fa-solid fa-wand-magic-sparkles me-2" aria-hidden="true"></i>
            Format
          </button>
        </div>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError()"
        rows="18"
        [(ngModel)]="inputJson"
        (ngModelChange)="handleInputChange($event)"
        spellcheck="false">
      </textarea>

      @if (parseError()) {
        <div class="invalid-feedback d-block mt-1">{{ parseError() }}</div>
      }

      <div class="form-text">
        Required: <code>name</code>. Optional: <code>id</code>, <code>className</code>,
        <code>isActive</code>, <code>active</code>, <code>disabled</code>,
        <code>title</code>, <code>ariaLabel</code>, <code>tabIndex</code>.
        When <code>isActive</code> is true, the <code>active</code> classes are appended.
        The component exposes <code>aria-pressed</code> from <code>isActive</code>.
      </div>
    </div>

    <!-- Right side: Output inspector -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Output (from <code>output</code>)</span>
        <button type="button" class="btn btn-sm btn-outline-danger" (click)="outputJson.set('// cleared')">
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="18"
        [ngModel]="outputJson()"
        (ngModelChange)="outputJson.set($event)"
        spellcheck="false">
      </textarea>

      <div class="form-text">
        Shape:
        <pre class="mb-0 mt-1 small">{{ outputShape }}</pre>
      </div>
    </div>
  </div>
</div>
