<nav [id]="navBarAction.id" [class]="navBarAction.className">
  <div [class]="navBarAction.containerClass">

    <!-- LEFT SECTION: Sidebar toggle + Back button -->
    <div class="d-flex align-items-center gap-2 flex-shrink-0">
      <!-- Sidebar offcanvas toggle (mobile only) -->
      @if (navBarAction.hasSidebar()) {
        <button
          class="btn btn-link d-lg-none p-1"
          type="button"
          data-bs-toggle="offcanvas"
          [attr.data-bs-target]="'#' + navBarAction.sidebarId"
          [attr.aria-controls]="navBarAction.sidebarId"
          aria-label="Toggle sidebar"
        >
          <i class="fa-solid fa-bars"></i>
        </button>
      }

      <!-- Back button -->
      @if (navBarAction.hasBackButton()) {
        <td-button-icon
          [buttonIcon]="navBarAction.backButton!"
          (output)="onBackButtonOutput($event)"
        ></td-button-icon>
      }
    </div>

    <!-- CENTER SECTION: Logo + Title -->
    <div class="d-flex align-items-center justify-content-between flex-grow-1 ms-2 overflow-hidden">
      <!-- Logo -->
      @if (navBarAction.hasLogo()) {
        <td-link-logo
          [linkLogo]="navBarAction.logo"
        ></td-link-logo>
      }

      <!-- Title -->
      @if (navBarAction.hasTitle()) {
        <div class="ms-2 text-truncate">
          <span
            [id]="navBarAction.title!.id"
            [class]="navBarAction.title!.className || 'navbar-text'"
          >
            {{ navBarAction.title!.name }}
          </span>
        </div>
      }
    </div>

    <!-- Navbar collapse toggle (for links/buttons) -->
    @if (navBarAction.showCollapse()) {
      <button
        class="navbar-toggler ms-2"
        type="button"
        data-bs-toggle="collapse"
        [attr.data-bs-target]="'#' + navBarAction.collapseId"
        [attr.aria-controls]="navBarAction.collapseId"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    }

    <!-- RIGHT SECTION: Collapsible content (links + buttons) -->
    <div
      [class]="navBarAction.showCollapse()
        ? 'collapse navbar-collapse justify-content-end ms-auto'
        : 'd-flex align-items-center justify-content-end flex-shrink-0 ms-auto'"
      [id]="navBarAction.showCollapse() ? navBarAction.collapseId : null"
    >
      <!-- Link bar -->
      @if (navBarAction.hasLinks()) {
        <td-link-bar
          [linkBar]="navBarAction.linkBar"
          (output)="onLinkBarOutput($event)"
        ></td-link-bar>
      }

      <!-- Button bar -->
      @if (navBarAction.hasButtons()) {
        <div class="d-flex align-items-center gap-2">
          <td-button-bar
            [buttonBar]="navBarAction.buttonBar"
            (output)="onButtonBarOutput($event)"
          ></td-button-bar>
        </div>
      }
    </div>

  </div>
</nav>