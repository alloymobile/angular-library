<div class="container py-3">
  <h3 class="mb-3 text-center">TDNavBar</h3>

  <!-- Tabs -->
  <ul class="nav nav-tabs flex-wrap justify-content-center mb-3">
    @for (tab of TABS; track tab.key) {
      <li class="nav-item">
        <button
          type="button"
          class="nav-link"
          [class.active]="activeTab === tab.key"
          (click)="setActiveTab(tab.key)"
        >
          {{ tab.label }}
        </button>
      </li>
    }
  </ul>

  <!-- Tag snippet (ICU-safe) -->
  <div class="row mb-4">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0 text-center w-100">
<code [textContent]="tagSnippet"></code>
      </pre>
    </div>
  </div>

  <!-- Live NavBar Preview -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="border rounded overflow-hidden">
        <td-nav-bar
          [navBar]="navBarModel"
          (output)="handleOutput($event)"
        ></td-nav-bar>
      </div>

      <div class="small text-secondary mt-2 text-center">
        <strong>TDNavBar</strong> renders a responsive Bootstrap navbar with brand (logo/link),
        collapsible toggle, and a link bar. Clicking a link emits an <code>OutputObject</code>.
      </div>

      <div class="small text-secondary mt-1 text-center">
        <strong>Hydration rule:</strong> Demo builds the model via <code>new TdNavBarModel(JSON.parse(json))</code>
        and nested models hydrate themselves.
      </div>
    </div>
  </div>

  <!-- Editable JSON + Output -->
  <div class="row g-3 align-items-stretch justify-content-center mb-5">
    <!-- Left: editable JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">
          Input JSON (editable) â€” {{ currentTabConfig.label }}
        </span>

        <button
          type="button"
          class="btn btn-sm btn-outline-secondary"
          (click)="resetJson()"
        >
          Reset
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="!!currentTab.parseError"
        rows="20"
        [ngModel]="currentTab.json"
        (ngModelChange)="onJsonChange($event)"
        spellcheck="false"
      ></textarea>

      @if (currentTab.parseError) {
        <div class="invalid-feedback d-block mt-1">
          {{ currentTab.parseError }}
        </div>
      }

      <div class="form-text">
        <ul class="mb-0 ps-3">
          <li>
            <code>brand</code>: supports TdLink / TdLinkIcon / TdLinkLogo (new navbar shape)
          </li>
          <li>
            <code>linkBar</code>: TdLinkBar config (hydrates link items by <code>type</code>)
          </li>
          <li>
            Types: <code>TdLink</code>, <code>TdLinkIcon</code>, <code>TdLinkLogo</code>
          </li>
          <li>
            Navbar is Bootstrap responsive: toggle + collapse based on <code>collapseId</code>
          </li>
        </ul>
      </div>
    </div>

    <!-- Right: output -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">
          Output (from <code>output</code> callback)
        </span>

        <button
          type="button"
          class="btn btn-sm btn-outline-danger"
          (click)="clearOutput()"
        >
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace bg-light border"
        rows="20"
        [ngModel]="currentTab.output"
        readonly
        spellcheck="false"
      ></textarea>
    </div>
  </div>
</div>
