<div class="container-fluid py-3">
  <h3 class="mb-3 text-center">TDTable – Grouped Headers</h3>

  <!-- Row 1 — Tag sample -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>{{ tagSnippet }}</code>
      </pre>
    </div>
  </div>

  <!-- Row 2 — Live table -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="table-responsive">
        <td-table [table]="model" (output)="handleOutput($event)"></td-table>
      </div>
      <div class="small text-secondary mt-2">
        <strong>Grouped Headers:</strong> Columns like <code>&lt;5k</code>, <code>5-10k</code> etc. 
        have nested sub-columns (Target, Floor). Sorting emits both <code>name</code> and <code>subColumn</code>.
      </div>
    </div>
  </div>

  <!-- Row 3 — Column Config Info -->
  <div class="row mb-3">
    <div class="col-12">
      <div class="alert alert-info small mb-0">
        <strong>Column Configuration:</strong> 
        Use <code>columns</code> array with <code>type: 'simple'</code> for flat columns 
        or <code>type: 'grouped'</code> with <code>subColumns</code> for nested headers.
        <br />
        <strong>Data Structure:</strong> 
        Grouped columns expect nested objects in row data, e.g., 
        <code>lessThan5k: &#123; target: 2.50, floor: 2.10 &#125;</code>
      </div>
    </div>
  </div>

  <!-- Row 4 — Input JSON (editable) and Output panel -->
  <div class="row g-3 align-items-stretch">
    <!-- Left: Input JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Input JSON (editable)</span>
        <button
          type="button"
          class="btn btn-sm btn-outline-secondary"
          (click)="resetJson()"
        >
          Reset
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError"
        rows="22"
        [ngModel]="inputJson"
        (ngModelChange)="onJsonChange($event)"
        spellcheck="false"
      ></textarea>

      <div *ngIf="parseError" class="invalid-feedback d-block mt-1">
        {{ parseError }}
      </div>

      <div class="form-text mt-2">
        <strong>Key Properties:</strong>
        <ul class="mb-0 mt-1">
          <li>
            <code>columns</code> – Array of <code>ColumnConfig</code> defining header structure
          </li>
          <li>
            <code>type: 'simple'</code> – Single header cell (uses <code>rowspan="2"</code>)
          </li>
          <li>
            <code>type: 'grouped'</code> – Parent header with <code>subColumns</code> beneath
          </li>
          <li>
            <code>showIconColumn</code> – Set to <code>false</code> to hide the icon column
          </li>
        </ul>
      </div>
    </div>

    <!-- Right: Output JSON -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">
          Output (from <code>output</code> callback)
        </span>
        <button
          type="button"
          class="btn btn-sm btn-outline-danger"
          (click)="clearOutput()"
        >
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="22"
        [ngModel]="outputJson"
        spellcheck="false"
        readonly
      ></textarea>

      <div class="form-text mt-2">
        <strong>Output Events:</strong>
        <ul class="mb-0 mt-1">
          <li>
            <strong>Column sort:</strong> 
            <code>&#123; type: 'column', name: 'lessThan5k', subColumn: 'target', dir: 'asc' &#125;</code>
          </li>
          <li>
            <strong>Row click:</strong> 
            <code>&#123; type: 'row', id: 1, row: &#123;...&#125; &#125;</code>
          </li>
        </ul>
        Use this payload to fetch sorted data from server and rebuild the table.
      </div>
    </div>
  </div>
</div>