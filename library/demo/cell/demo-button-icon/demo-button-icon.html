<div class="container py-3">
  <h3 class="mb-3 text-center">TdButtonIcon</h3>

  <!-- Tabs -->
  <div class="d-flex justify-content-center mb-3">
    <div class="btn-group" role="tablist" aria-label="ButtonIcon demo modes">
      <button
        type="button"
        class="btn btn-sm"
        [class.btn-primary]="tab() === 'label'"
        [class.btn-outline-primary]="tab() !== 'label'"
        (click)="setTab('label')">
        With label
      </button>
      <button
        type="button"
        class="btn btn-sm"
        [class.btn-primary]="tab() === 'iconOnly'"
        [class.btn-outline-primary]="tab() !== 'iconOnly'"
        (click)="setTab('iconOnly')">
        Icon-only
      </button>
    </div>
  </div>

  <!-- Usage snippet -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>&lt;td-button-icon [buttonIcon]="buttonIconObj" (output)="handleOutput($event)"&gt;&lt;/td-button-icon&gt;</code>
      </pre>
    </div>
  </div>

  <!-- Live preview -->
  <div class="row mb-4">
    <div class="col-12 text-center">
      <td-button-icon
        [buttonIcon]="model()"
        (output)="handleOutput($event)">
      </td-button-icon>

      <div class="d-flex justify-content-center gap-2 mt-3">
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="toggleActive()">
          Toggle isActive
        </button>
      </div>

      <div class="small text-secondary mt-2">
        If <code>name</code> is missing â‡’ icon-only button.
        On click, emitted <code>data.name</code> = <code>name</code> if present, otherwise <code>title</code>.
        Active styling is parent-driven via <code>isActive</code> + <code>active</code> and exposes <code>aria-pressed</code>.
      </div>
    </div>
  </div>

  <!-- JSON in / JSON out -->
  <div class="row g-3 align-items-stretch">
    <!-- Input editor -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Input JSON (editable)</span>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="handleReset()">
            Reset
          </button>
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="handleFormat()">
            <i class="fa-solid fa-wand-magic-sparkles me-2" aria-hidden="true"></i>
            Format
          </button>
        </div>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError()"
        rows="18"
        [(ngModel)]="inputJson"
        (ngModelChange)="handleInputChange($event)"
        spellcheck="false">
      </textarea>

      @if (parseError()) {
        <div class="invalid-feedback d-block mt-1">{{ parseError() }}</div>
      }

      <div class="form-text">
        Required: <code>icon</code> (at least <code>icon.iconClass</code>).
        Optional: <code>name</code>, <code>title</code>, <code>id</code>, <code>className</code>,
        <code>isActive</code>, <code>active</code>, <code>disabled</code>, <code>ariaLabel</code>, <code>tabIndex</code>.
      </div>
    </div>

    <!-- Output inspector -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Output (from <code>output</code>)</span>
        <button type="button" class="btn btn-sm btn-outline-danger" (click)="clearOutput()">
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="18"
        [ngModel]="outputJson()"
        (ngModelChange)="outputJson.set($event)"
        spellcheck="false">
      </textarea>

      <div class="form-text">
        Shape:
        <pre class="mb-0 mt-1 small">{{ outputShape }}</pre>
      </div>
    </div>
  </div>
</div>
