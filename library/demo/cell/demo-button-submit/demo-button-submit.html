<div class="container py-3">
  <h3 class="mb-3 text-center">TdButtonSubmit</h3>

  <!-- Usage snippet -->
  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>&lt;td-button-submit [buttonSubmit]="submitObj" (output)="handleOutput($event)"&gt;&lt;/td-button-submit&gt;</code>
      </pre>
    </div>
  </div>

  <!-- Live preview -->
  <div class="row mb-4">
    <div class="col-12 text-center">
      <form (submit)="$event.preventDefault()">
        <td-button-submit
          [buttonSubmit]="model()"
          (output)="handleOutput($event)">
        </td-button-submit>
      </form>

      <div class="d-flex justify-content-center flex-wrap gap-2 mt-3">
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="apiStart()">
          Simulate API Start (loading=true)
        </button>
        <button type="button" class="btn btn-sm btn-outline-success" (click)="apiDone()">
          Simulate API Done (loading=false)
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary" (click)="toggleDisabled()">
          Toggle disabled
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary" (click)="toggleActive()">
          Toggle isActive
        </button>
      </div>

      <div class="small text-secondary mt-2">
        Click arms immediately (spinner + disabled). Parent re-enables the button by setting
        <code>loading:false</code> again. This demo lets you flip loading manually (no timers).
      </div>
    </div>
  </div>

  <!-- JSON in / JSON out -->
  <div class="row g-3 align-items-stretch">
    <!-- Input editor -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Input JSON (editable)</span>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="handleReset()">
            Reset
          </button>
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="handleFormat()">
            <i class="fa-solid fa-wand-magic-sparkles me-2" aria-hidden="true"></i>
            Format
          </button>
        </div>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="parseError()"
        rows="18"
        [(ngModel)]="inputJson"
        (ngModelChange)="handleInputChange($event)"
        spellcheck="false">
      </textarea>

      @if (parseError()) {
        <div class="invalid-feedback d-block mt-1">{{ parseError() }}</div>
      }

      <div class="form-text">
        Required: <code>name</code>. Optional:
        <code>id</code>, <code>className</code>, <code>isActive</code>, <code>active</code>,
        <code>disabled</code>, <code>loading</code>, <code>title</code>, <code>ariaLabel</code>,
        <code>tabIndex</code>, <code>icon</code> (string or object with <code>iconClass</code>).
      </div>
    </div>

    <!-- Output inspector -->
    <div class="col-12 col-lg-6">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="fw-semibold">Output (from <code>output</code>)</span>
        <button type="button" class="btn btn-sm btn-outline-danger" (click)="clearOutput()">
          Clear
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        rows="18"
        [ngModel]="outputJson()"
        (ngModelChange)="outputJson.set($event)"
        spellcheck="false">
      </textarea>

      <div class="form-text">
        Output shape:
        <pre class="mb-0 mt-1 small">{{ outputShape }}</pre>
      </div>
    </div>
  </div>
</div>
