-- ============================================================================
-- ULOC and ILOC MVP 1 - IBM DB2 Database Scripts
-- Script: 06_indexes.sql
-- Purpose: All indexes for query optimization
-- Author: Database Administrator
-- Created: 2026-01-26
-- ============================================================================

SET CURRENT SCHEMA = 'RATEMGMT';

-- ============================================================================
-- SECTION 1: FOREIGN KEY INDEXES (Critical for JOIN performance)
-- ============================================================================

-- CATEGORY FK Indexes
CREATE INDEX IDX_CATEGORY_PRODUCT ON CATEGORY (PRODUCT_ID);

-- SUB_CATEGORY FK Indexes
CREATE INDEX IDX_SUBCAT_CATEGORY ON SUB_CATEGORY (CATEGORY_ID);

-- CVP_CODE FK Indexes
CREATE INDEX IDX_CVP_SUBCAT ON CVP_CODE (SUB_CATEGORY_ID);

-- AMOUNT_TIER FK Indexes
CREATE INDEX IDX_TIER_PRODUCT ON AMOUNT_TIER (PRODUCT_ID);

-- RATE_ILOC_DRAFT FK Indexes
CREATE INDEX IDX_ILOC_DRF_TIER ON RATE_ILOC_DRAFT (AMOUNT_TIER_ID);
CREATE INDEX IDX_ILOC_DRF_SUBCAT ON RATE_ILOC_DRAFT (SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_DRF_NOTIF ON RATE_ILOC_DRAFT (NOTIFICATION_ID);
CREATE INDEX IDX_ILOC_DRF_WORKFLOW ON RATE_ILOC_DRAFT (WORKFLOW_ID);

-- RATE_ILOC_ACTIVE FK Indexes
CREATE INDEX IDX_ILOC_ACT_TIER ON RATE_ILOC_ACTIVE (AMOUNT_TIER_ID);
CREATE INDEX IDX_ILOC_ACT_SUBCAT ON RATE_ILOC_ACTIVE (SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_ACT_NOTIF ON RATE_ILOC_ACTIVE (NOTIFICATION_ID);
CREATE INDEX IDX_ILOC_ACT_WORKFLOW ON RATE_ILOC_ACTIVE (WORKFLOW_ID);

-- RATE_ILOC_HISTORY FK Indexes
CREATE INDEX IDX_ILOC_HST_TIER ON RATE_ILOC_HISTORY (AMOUNT_TIER_ID);
CREATE INDEX IDX_ILOC_HST_SUBCAT ON RATE_ILOC_HISTORY (SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_HST_NOTIF ON RATE_ILOC_HISTORY (NOTIFICATION_ID);
CREATE INDEX IDX_ILOC_HST_WORKFLOW ON RATE_ILOC_HISTORY (WORKFLOW_ID);

-- RATE_ULOC_DRAFT FK Indexes
CREATE INDEX IDX_ULOC_DRF_CVP ON RATE_ULOC_DRAFT (CVP_CODE_ID);
CREATE INDEX IDX_ULOC_DRF_TIER ON RATE_ULOC_DRAFT (AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_DRF_NOTIF ON RATE_ULOC_DRAFT (NOTIFICATION_ID);
CREATE INDEX IDX_ULOC_DRF_WORKFLOW ON RATE_ULOC_DRAFT (WORKFLOW_ID);

-- RATE_ULOC_ACTIVE FK Indexes
CREATE INDEX IDX_ULOC_ACT_CVP ON RATE_ULOC_ACTIVE (CVP_CODE_ID);
CREATE INDEX IDX_ULOC_ACT_TIER ON RATE_ULOC_ACTIVE (AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_ACT_NOTIF ON RATE_ULOC_ACTIVE (NOTIFICATION_ID);
CREATE INDEX IDX_ULOC_ACT_WORKFLOW ON RATE_ULOC_ACTIVE (WORKFLOW_ID);

-- RATE_ULOC_HISTORY FK Indexes
CREATE INDEX IDX_ULOC_HST_CVP ON RATE_ULOC_HISTORY (CVP_CODE_ID);
CREATE INDEX IDX_ULOC_HST_TIER ON RATE_ULOC_HISTORY (AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_HST_NOTIF ON RATE_ULOC_HISTORY (NOTIFICATION_ID);
CREATE INDEX IDX_ULOC_HST_WORKFLOW ON RATE_ULOC_HISTORY (WORKFLOW_ID);

-- ============================================================================
-- SECTION 2: DATE RANGE INDEXES (Critical for Rate Lookups)
-- ============================================================================

-- ILOC Rate Tables - Date Range
CREATE INDEX IDX_ILOC_DRF_DATERANGE ON RATE_ILOC_DRAFT (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ILOC_DRF_EXPIRY ON RATE_ILOC_DRAFT (EXPIRY_DATE DESC);
CREATE INDEX IDX_ILOC_DRF_START ON RATE_ILOC_DRAFT (START_DATE);

CREATE INDEX IDX_ILOC_ACT_DATERANGE ON RATE_ILOC_ACTIVE (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ILOC_ACT_EXPIRY ON RATE_ILOC_ACTIVE (EXPIRY_DATE DESC);
CREATE INDEX IDX_ILOC_ACT_START ON RATE_ILOC_ACTIVE (START_DATE);

CREATE INDEX IDX_ILOC_HST_DATERANGE ON RATE_ILOC_HISTORY (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ILOC_HST_EXPIRY ON RATE_ILOC_HISTORY (EXPIRY_DATE DESC);

-- ULOC Rate Tables - Date Range
CREATE INDEX IDX_ULOC_DRF_DATERANGE ON RATE_ULOC_DRAFT (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ULOC_DRF_EXPIRY ON RATE_ULOC_DRAFT (EXPIRY_DATE DESC);
CREATE INDEX IDX_ULOC_DRF_START ON RATE_ULOC_DRAFT (START_DATE);

CREATE INDEX IDX_ULOC_ACT_DATERANGE ON RATE_ULOC_ACTIVE (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ULOC_ACT_EXPIRY ON RATE_ULOC_ACTIVE (EXPIRY_DATE DESC);
CREATE INDEX IDX_ULOC_ACT_START ON RATE_ULOC_ACTIVE (START_DATE);

CREATE INDEX IDX_ULOC_HST_DATERANGE ON RATE_ULOC_HISTORY (START_DATE, EXPIRY_DATE);
CREATE INDEX IDX_ULOC_HST_EXPIRY ON RATE_ULOC_HISTORY (EXPIRY_DATE DESC);

-- ============================================================================
-- SECTION 3: STATUS + ACTIVE FLAG INDEXES (Filtering Performance)
-- ============================================================================

-- ILOC Rate Tables - Status/Active
CREATE INDEX IDX_ILOC_DRF_STATUS ON RATE_ILOC_DRAFT (STATUS);
CREATE INDEX IDX_ILOC_DRF_ACTIVE ON RATE_ILOC_DRAFT (ACTIVE);
CREATE INDEX IDX_ILOC_DRF_STATUS_ACTIVE ON RATE_ILOC_DRAFT (STATUS, ACTIVE);

CREATE INDEX IDX_ILOC_ACT_STATUS ON RATE_ILOC_ACTIVE (STATUS);
CREATE INDEX IDX_ILOC_ACT_ACTIVE ON RATE_ILOC_ACTIVE (ACTIVE);
CREATE INDEX IDX_ILOC_ACT_STATUS_ACTIVE ON RATE_ILOC_ACTIVE (STATUS, ACTIVE);

CREATE INDEX IDX_ILOC_HST_STATUS ON RATE_ILOC_HISTORY (STATUS);
CREATE INDEX IDX_ILOC_HST_ACTIVE ON RATE_ILOC_HISTORY (ACTIVE);
CREATE INDEX IDX_ILOC_HST_STATUS_ACTIVE ON RATE_ILOC_HISTORY (STATUS, ACTIVE);

-- ULOC Rate Tables - Status/Active
CREATE INDEX IDX_ULOC_DRF_STATUS ON RATE_ULOC_DRAFT (STATUS);
CREATE INDEX IDX_ULOC_DRF_ACTIVE ON RATE_ULOC_DRAFT (ACTIVE);
CREATE INDEX IDX_ULOC_DRF_STATUS_ACTIVE ON RATE_ULOC_DRAFT (STATUS, ACTIVE);

CREATE INDEX IDX_ULOC_ACT_STATUS ON RATE_ULOC_ACTIVE (STATUS);
CREATE INDEX IDX_ULOC_ACT_ACTIVE ON RATE_ULOC_ACTIVE (ACTIVE);
CREATE INDEX IDX_ULOC_ACT_STATUS_ACTIVE ON RATE_ULOC_ACTIVE (STATUS, ACTIVE);

CREATE INDEX IDX_ULOC_HST_STATUS ON RATE_ULOC_HISTORY (STATUS);
CREATE INDEX IDX_ULOC_HST_ACTIVE ON RATE_ULOC_HISTORY (ACTIVE);
CREATE INDEX IDX_ULOC_HST_STATUS_ACTIVE ON RATE_ULOC_HISTORY (STATUS, ACTIVE);

-- Master Tables - Active Flag
CREATE INDEX IDX_PRODUCT_ACTIVE ON PRODUCT (ACTIVE);
CREATE INDEX IDX_CATEGORY_ACTIVE ON CATEGORY (ACTIVE);
CREATE INDEX IDX_SUBCAT_ACTIVE ON SUB_CATEGORY (ACTIVE);
CREATE INDEX IDX_CVP_ACTIVE ON CVP_CODE (ACTIVE);
CREATE INDEX IDX_TIER_ACTIVE ON AMOUNT_TIER (ACTIVE);
CREATE INDEX IDX_PRIME_ACTIVE ON PRIME (ACTIVE);
CREATE INDEX IDX_NOTIF_ACTIVE ON NOTIFICATION (ACTIVE);

-- ============================================================================
-- SECTION 4: COMPOSITE FK INDEXES (Multi-Table Join Optimization)
-- ============================================================================

-- ILOC Composite Indexes
CREATE INDEX IDX_ILOC_DRF_TIER_SUBCAT ON RATE_ILOC_DRAFT (AMOUNT_TIER_ID, SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_DRF_SUBCAT_STATUS ON RATE_ILOC_DRAFT (SUB_CATEGORY_ID, STATUS, ACTIVE);

CREATE INDEX IDX_ILOC_ACT_TIER_SUBCAT ON RATE_ILOC_ACTIVE (AMOUNT_TIER_ID, SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_ACT_SUBCAT_STATUS ON RATE_ILOC_ACTIVE (SUB_CATEGORY_ID, STATUS, ACTIVE);

CREATE INDEX IDX_ILOC_HST_TIER_SUBCAT ON RATE_ILOC_HISTORY (AMOUNT_TIER_ID, SUB_CATEGORY_ID);
CREATE INDEX IDX_ILOC_HST_SUBCAT_STATUS ON RATE_ILOC_HISTORY (SUB_CATEGORY_ID, STATUS, ACTIVE);

-- ULOC Composite Indexes
CREATE INDEX IDX_ULOC_DRF_CVP_TIER ON RATE_ULOC_DRAFT (CVP_CODE_ID, AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_DRF_CVP_STATUS ON RATE_ULOC_DRAFT (CVP_CODE_ID, STATUS, ACTIVE);

CREATE INDEX IDX_ULOC_ACT_CVP_TIER ON RATE_ULOC_ACTIVE (CVP_CODE_ID, AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_ACT_CVP_STATUS ON RATE_ULOC_ACTIVE (CVP_CODE_ID, STATUS, ACTIVE);

CREATE INDEX IDX_ULOC_HST_CVP_TIER ON RATE_ULOC_HISTORY (CVP_CODE_ID, AMOUNT_TIER_ID);
CREATE INDEX IDX_ULOC_HST_CVP_STATUS ON RATE_ULOC_HISTORY (CVP_CODE_ID, STATUS, ACTIVE);

-- Master Table Composite Indexes
CREATE INDEX IDX_CAT_PROD_ACTIVE ON CATEGORY (PRODUCT_ID, ACTIVE);
CREATE INDEX IDX_SUBCAT_CAT_ACTIVE ON SUB_CATEGORY (CATEGORY_ID, ACTIVE);
CREATE INDEX IDX_CVP_SUBCAT_ACTIVE ON CVP_CODE (SUB_CATEGORY_ID, ACTIVE);
CREATE INDEX IDX_TIER_PROD_ACTIVE ON AMOUNT_TIER (PRODUCT_ID, ACTIVE);
CREATE INDEX IDX_PRODUCT_TYPE_ACTIVE ON PRODUCT (TYPE, ACTIVE);

-- ============================================================================
-- SECTION 5: RATE VALUE INDEXES (Sorting and Comparison)
-- ============================================================================

-- ILOC Rate Value Indexes
CREATE INDEX IDX_ILOC_DRF_TARGETRATE ON RATE_ILOC_DRAFT (TARGET_RATE);
CREATE INDEX IDX_ILOC_DRF_FLOORRATE ON RATE_ILOC_DRAFT (FLOOR_RATE);

CREATE INDEX IDX_ILOC_ACT_TARGETRATE ON RATE_ILOC_ACTIVE (TARGET_RATE);
CREATE INDEX IDX_ILOC_ACT_FLOORRATE ON RATE_ILOC_ACTIVE (FLOOR_RATE);

CREATE INDEX IDX_ILOC_HST_TARGETRATE ON RATE_ILOC_HISTORY (TARGET_RATE);
CREATE INDEX IDX_ILOC_HST_FLOORRATE ON RATE_ILOC_HISTORY (FLOOR_RATE);

-- ULOC Rate Value Indexes
CREATE INDEX IDX_ULOC_DRF_TARGETRATE ON RATE_ULOC_DRAFT (TARGET_RATE);
CREATE INDEX IDX_ULOC_DRF_FLOORRATE ON RATE_ULOC_DRAFT (FLOOR_RATE);

CREATE INDEX IDX_ULOC_ACT_TARGETRATE ON RATE_ULOC_ACTIVE (TARGET_RATE);
CREATE INDEX IDX_ULOC_ACT_FLOORRATE ON RATE_ULOC_ACTIVE (FLOOR_RATE);

CREATE INDEX IDX_ULOC_HST_TARGETRATE ON RATE_ULOC_HISTORY (TARGET_RATE);
CREATE INDEX IDX_ULOC_HST_FLOORRATE ON RATE_ULOC_HISTORY (FLOOR_RATE);

-- Prime Rate Index
CREATE INDEX IDX_PRIME_RATE ON PRIME (RATE);

-- Amount Tier Range Index
CREATE INDEX IDX_TIER_MINMAX ON AMOUNT_TIER (MIN, MAX);
CREATE INDEX IDX_TIER_MIN ON AMOUNT_TIER (MIN);
CREATE INDEX IDX_TIER_MAX ON AMOUNT_TIER (MAX);

-- ============================================================================
-- SECTION 6: AUDIT TRAIL INDEXES (Created/Updated Tracking)
-- ============================================================================

-- ILOC Draft Audit Indexes
CREATE INDEX IDX_ILOC_DRF_CREATED ON RATE_ILOC_DRAFT (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ILOC_DRF_UPDATED ON RATE_ILOC_DRAFT (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ILOC_DRF_CREATEDBY ON RATE_ILOC_DRAFT (CREATED_BY, CREATED_ON DESC);

-- ILOC Active Audit Indexes
CREATE INDEX IDX_ILOC_ACT_CREATED ON RATE_ILOC_ACTIVE (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ILOC_ACT_UPDATED ON RATE_ILOC_ACTIVE (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ILOC_ACT_CREATEDBY ON RATE_ILOC_ACTIVE (CREATED_BY, CREATED_ON DESC);

-- ILOC History Audit Indexes
CREATE INDEX IDX_ILOC_HST_CREATED ON RATE_ILOC_HISTORY (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ILOC_HST_UPDATED ON RATE_ILOC_HISTORY (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ILOC_HST_CREATEDBY ON RATE_ILOC_HISTORY (CREATED_BY, CREATED_ON DESC);
CREATE INDEX IDX_ILOC_HST_ARCHIVED ON RATE_ILOC_HISTORY (ARCHIVED_ON DESC, ARCHIVED_BY);

-- ULOC Draft Audit Indexes
CREATE INDEX IDX_ULOC_DRF_CREATED ON RATE_ULOC_DRAFT (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ULOC_DRF_UPDATED ON RATE_ULOC_DRAFT (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ULOC_DRF_CREATEDBY ON RATE_ULOC_DRAFT (CREATED_BY, CREATED_ON DESC);

-- ULOC Active Audit Indexes
CREATE INDEX IDX_ULOC_ACT_CREATED ON RATE_ULOC_ACTIVE (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ULOC_ACT_UPDATED ON RATE_ULOC_ACTIVE (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ULOC_ACT_CREATEDBY ON RATE_ULOC_ACTIVE (CREATED_BY, CREATED_ON DESC);

-- ULOC History Audit Indexes
CREATE INDEX IDX_ULOC_HST_CREATED ON RATE_ULOC_HISTORY (CREATED_ON DESC, CREATED_BY);
CREATE INDEX IDX_ULOC_HST_UPDATED ON RATE_ULOC_HISTORY (UPDATED_ON DESC, UPDATED_BY);
CREATE INDEX IDX_ULOC_HST_CREATEDBY ON RATE_ULOC_HISTORY (CREATED_BY, CREATED_ON DESC);
CREATE INDEX IDX_ULOC_HST_ARCHIVED ON RATE_ULOC_HISTORY (ARCHIVED_ON DESC, ARCHIVED_BY);

-- Master Tables Audit Indexes
CREATE INDEX IDX_PRODUCT_CREATED ON PRODUCT (CREATED_ON DESC);
CREATE INDEX IDX_CATEGORY_CREATED ON CATEGORY (CREATED_ON DESC);
CREATE INDEX IDX_SUBCAT_CREATED ON SUB_CATEGORY (CREATED_ON DESC);
CREATE INDEX IDX_CVP_CREATED ON CVP_CODE (CREATED_ON DESC);
CREATE INDEX IDX_TIER_CREATED ON AMOUNT_TIER (CREATED_ON DESC);
CREATE INDEX IDX_NOTIF_CREATED ON NOTIFICATION (CREATED_ON DESC);
CREATE INDEX IDX_WORKFLOW_CREATED ON WORKFLOW (CREATED_ON DESC);

-- ============================================================================
-- SECTION 7: WORKFLOW & NOTIFICATION INDEXES
-- ============================================================================

-- Workflow Indexes
CREATE INDEX IDX_WF_RATETYPE ON WORKFLOW (RATE_TYPE);
CREATE INDEX IDX_WF_RATESTATUS ON WORKFLOW (RATE_STATUS);
CREATE INDEX IDX_WF_RATETYPE_STATUS ON WORKFLOW (RATE_TYPE, RATE_STATUS);
CREATE INDEX IDX_WF_RATEID ON WORKFLOW (RATE_ID);
CREATE INDEX IDX_WF_CHANGEID ON WORKFLOW (CHANGE_ID);
CREATE INDEX IDX_WF_ACTION ON WORKFLOW (ACTION);
CREATE INDEX IDX_WF_ACTION_DATE ON WORKFLOW (ACTION, CHANGE_ON DESC);
CREATE INDEX IDX_WF_FROMTO_STATUS ON WORKFLOW (FROM_STATUS, TO_STATUS);
CREATE INDEX IDX_WF_CHANGEBY ON WORKFLOW (CHANGE_BY, CHANGE_ON DESC);
CREATE INDEX IDX_WF_CHANGEON ON WORKFLOW (CHANGE_ON DESC);

-- Notification Indexes
CREATE INDEX IDX_NOTIF_STATUS ON NOTIFICATION (STATUS);
CREATE INDEX IDX_NOTIF_STATUS_ACTIVE ON NOTIFICATION (STATUS, ACTIVE);

-- ============================================================================
-- SECTION 8: HISTORY TABLE SPECIFIC INDEXES
-- ============================================================================

-- ILOC History Specific
CREATE INDEX IDX_ILOC_HST_CHANGE ON RATE_ILOC_HISTORY (CHANGE_ID, UPDATED_ON DESC);
CREATE INDEX IDX_ILOC_HST_ORIGINAL ON RATE_ILOC_HISTORY (ORIGINAL_ID);
CREATE INDEX IDX_ILOC_HST_REASON ON RATE_ILOC_HISTORY (ARCHIVE_REASON);
CREATE INDEX IDX_ILOC_HST_DATERANGE_UPD ON RATE_ILOC_HISTORY (START_DATE, EXPIRY_DATE, UPDATED_ON);

-- ULOC History Specific
CREATE INDEX IDX_ULOC_HST_CHANGE ON RATE_ULOC_HISTORY (CHANGE_ID, UPDATED_ON DESC);
CREATE INDEX IDX_ULOC_HST_ORIGINAL ON RATE_ULOC_HISTORY (ORIGINAL_ID);
CREATE INDEX IDX_ULOC_HST_REASON ON RATE_ULOC_HISTORY (ARCHIVE_REASON);
CREATE INDEX IDX_ULOC_HST_DATERANGE_UPD ON RATE_ULOC_HISTORY (START_DATE, EXPIRY_DATE, UPDATED_ON);

-- ============================================================================
-- SECTION 9: COVERING INDEXES (For High-Frequency Queries)
-- ============================================================================

-- ILOC Active Covering Index - Rate Lookup
CREATE INDEX IDX_ILOC_ACT_COVER_RATE ON RATE_ILOC_ACTIVE (
    SUB_CATEGORY_ID,
    AMOUNT_TIER_ID,
    ACTIVE,
    STATUS,
    START_DATE,
    EXPIRY_DATE,
    TARGET_RATE,
    FLOOR_RATE,
    DISCRETION
);

-- ULOC Active Covering Index - Rate Lookup
CREATE INDEX IDX_ULOC_ACT_COVER_RATE ON RATE_ULOC_ACTIVE (
    CVP_CODE_ID,
    AMOUNT_TIER_ID,
    ACTIVE,
    STATUS,
    START_DATE,
    EXPIRY_DATE,
    TARGET_RATE,
    FLOOR_RATE,
    DISCRETION
);

-- Product Hierarchy Covering Index
CREATE INDEX IDX_CATEGORY_COVER ON CATEGORY (PRODUCT_ID, ACTIVE, NAME);
CREATE INDEX IDX_SUBCAT_COVER ON SUB_CATEGORY (CATEGORY_ID, ACTIVE, NAME);
CREATE INDEX IDX_CVP_COVER ON CVP_CODE (SUB_CATEGORY_ID, ACTIVE, NAME);

-- ============================================================================
-- SECTION 10: VALID RATE LOOKUP COMPOSITE INDEXES
-- ============================================================================

-- ILOC - Find valid rates for a specific date
CREATE INDEX IDX_ILOC_ACT_VALID_RATE ON RATE_ILOC_ACTIVE (
    ACTIVE,
    STATUS,
    START_DATE,
    EXPIRY_DATE,
    SUB_CATEGORY_ID,
    AMOUNT_TIER_ID
);

-- ULOC - Find valid rates for a specific date
CREATE INDEX IDX_ULOC_ACT_VALID_RATE ON RATE_ULOC_ACTIVE (
    ACTIVE,
    STATUS,
    START_DATE,
    EXPIRY_DATE,
    CVP_CODE_ID,
    AMOUNT_TIER_ID
);

-- ============================================================================
-- SECTION 11: VERSION CONTROL INDEXES
-- ============================================================================

CREATE INDEX IDX_ILOC_DRF_VERSION ON RATE_ILOC_DRAFT (VERSION);
CREATE INDEX IDX_ILOC_ACT_VERSION ON RATE_ILOC_ACTIVE (VERSION);
CREATE INDEX IDX_ILOC_HST_VERSION ON RATE_ILOC_HISTORY (VERSION);
CREATE INDEX IDX_ULOC_DRF_VERSION ON RATE_ULOC_DRAFT (VERSION);
CREATE INDEX IDX_ULOC_ACT_VERSION ON RATE_ULOC_ACTIVE (VERSION);
CREATE INDEX IDX_ULOC_HST_VERSION ON RATE_ULOC_HISTORY (VERSION);

-- ============================================================================
-- END OF SCRIPT
-- Total Indexes Created: ~150
-- ============================================================================
