<!-- src/app/demo/pages/icon-page/icon-page.html -->
<section id="icon" class="p-0">
  <h3 class="mb-1 text-center">TdIcon</h3>

  <!-- Row 1 — Code sample -->
  <div class="row mb-2">
    <div class="col-12 d-flex align-items-center justify-content-center">
      <pre class="bg-light text-dark border rounded-3 p-3 small mb-0">
        <code>{{ codeSample }}</code>
      </pre>
    </div>
  </div>

  <!-- Row 2 — Preview -->
  <div class="row mb-3">
    <div class="col-12 text-center">
      <span class="fw-semibold d-block mb-2">Icon</span>

      <div class="d-flex justify-content-center">
        <td-icon [icon]="preview"></td-icon>
      </div>

      <div class="form-text mt-2">
        Wrapper styling comes from <code>className</code> on the icon object.
      </div>
    </div>
  </div>

  <!-- Row 3 — Editable JSON -->
  <div class="row mb-2">
    <div class="col-12">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <span class="fw-semibold">Icon JSON (editable)</span>

        <button type="button" (click)="formatJson()" class="btn btn-sm btn-outline-secondary">
          <i class="fa-solid fa-wand-magic-sparkles me-2" aria-hidden="true"></i>
          Format JSON
        </button>
      </div>

      <textarea
        class="form-control font-monospace"
        [class.is-invalid]="!!jsonError"
        rows="7"
        spellcheck="false"
        [value]="jsonText"
        (input)="onJsonChange($any($event.target).value)"
      ></textarea>

      <div *ngIf="jsonError" class="invalid-feedback d-block">
        {{ jsonError }}
      </div>

      <div *ngIf="!jsonError" class="form-text">
        Required: <code>iconClass</code>. Optional:
        <code>id</code>, <code>className</code>, <code>ariaLabel</code>, <code>ariaMode</code>, <code>title</code>.
      </div>
    </div>
  </div>

  <!-- Search -->
  <div class="mb-3">
    <label for="iconSearch" class="form-label fw-semibold">Search Icons</label>
    <input
      id="iconSearch"
      type="search"
      class="form-control"
      placeholder="Type name (e.g., user, gear, arrow)"
      [value]="query"
      (input)="onQuery($any($event.target).value)"
    />
  </div>

  <!-- Gallery -->
  <div class="row g-2">
    <div class="col-1" *ngFor="let it of filtered; let idx = index; trackBy: trackByIcon">
      <button
        type="button"
        class="btn w-100 d-flex align-items-center justify-content-center py-3 icon-grid-btn"
        [class.btn-primary]="isActive(it)"
        [class.btn-outline-secondary]="!isActive(it)"
        [attr.title]="it.name"
        (click)="selectIcon(it)"
      >
        <i [class]="it.cls + ' fa-lg'" aria-hidden="true"></i>
      </button>
    </div>

    <div class="col-12" *ngIf="filtered.length === 0">
      <div class="alert alert-warning mb-0">
        No icons match “{{ query }}”.
      </div>
    </div>
  </div>
</section>
